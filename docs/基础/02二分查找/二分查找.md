[toc]



## é‡è¦

å‰æï¼š**æ•°ç»„æœ‰åº**ã€‚



æ—¶é—´å¤æ‚åº¦ï¼šåŒäºŒå‰æœç´¢æ ‘ï¼Œå¾ªç¯æ¬¡æ•°æœ€å¤šä¸ºäºŒå‰æ ‘çš„é«˜åº¦ï¼Œ$O(\logâ¡ n)$ æ—¶é—´



12ä¸ªå…ƒç´ çš„æ’åºæ•°ç»„è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œæ¯ä¸ªå…ƒç´ è¢«æŸ¥æ‰¾çš„æ¦‚ç‡æ˜¯ç›¸ç­‰çš„ï¼Œåˆ™å¹³å‡æ¯”è¾ƒæ¬¡æ•°æ˜¯ï¼Ÿ37/12

â€‹	$æŸ¥æ‰¾æ¬¡æ•°/å…ƒç´ ä¸ªæ•°=1*1+2*2+3*4+4*5$ã€‚ç”»ä¸€ä¸ªäºŒå‰æ ‘ï¼Œç¬¬iå±‚å°±è¦æ¯”è¾ƒici



**target < nums[m] < target**ã€‚nums[m]åœ¨ä¸­é—´ï¼ˆå¯¹åº”mæ˜¯ä¸­é—´ç´¢å¼•ï¼‰

1. åŸºç¡€ç‰ˆå’Œæ”¹åŠ¨ç‰ˆï¼šåŒºåˆ«å°±æ˜¯**å·¦é—­å³é—­**ã€å·¦é—­å³å¼€ã€‚

     - i=0ï¼Œ**j = n -1** , j = n
     - **while(i<=j)**, while(i<j)
     - **j = m- 1**, j = m

2. åŸºç¡€ç‰ˆçš„å¤æ‚åº¦

    æ—¶é—´å¤æ‚åº¦
    * æœ€åæƒ…å†µ: **$O(\log n)$**
    * æœ€å¥½æƒ…å†µ: å¦‚æœå¾…æŸ¥æ‰¾å…ƒç´ æ°å¥½åœ¨æ•°ç»„ä¸­å¤®ï¼Œåªéœ€è¦å¾ªç¯ä¸€æ¬¡ $O(1)$
    
    ç©ºé—´å¤æ‚åº¦
    * éœ€è¦å¸¸æ•°ä¸ªæŒ‡é’ˆ $i,j,m$ , å› æ­¤é¢å¤–å ç”¨çš„ç©ºé—´æ˜¯ $O(1)$ 

3. leftmostå’Œrightmostçš„ç²¾å‡†æ‰¾åˆ° -1ï¼šæ‰¾ä¸åˆ°è¿”å›-1

    - leftmost: æ‰¾åˆ°äº†å¾€å·¦ç§»ï¼Œ j = m - 1
    - rightmost: æ‰¾åˆ°äº†å¾€å³ç§»ï¼Œ i = m + 1
4. leftmostå’Œrightmostçš„æ‰¾åˆ°<=ï¼šæ‰¾ä¸åˆ°è¿”å›æ›¿èº«

    - leftmostï¼šå¤§äºç­‰äºçš„æœ€å·¦ `target <= a[m]`, i
    - rightmostï¼šå°äºç­‰äºçš„æœ€å³ `a[m] <= target`ï¼Œi-1

### åŸºç¡€ç‰ˆï¼šijéƒ½æŸ¥ 

```java
// 704. äºŒåˆ†æŸ¥æ‰¾
class Solution {
    public int search(int[] nums, int target) {
        int i = 0, j = nums.length - 1;
        while (i <= j) {                // [i,j] èŒƒå›´å†…æœ‰ä¸œè¥¿
            int m = i + j >>> 1;      	// åŒ (i + j) >>> 1; 
            if (nums[m] > target) {             // å¾€å·¦æ‰¾æ›´å°çš„ï¼Œæ”¶ç¼©å³ä¾§
                j = m - 1;
            } else if (nums[m] < target){       // å¾€å³æ‰¾æ›´å¤§çš„ï¼Œæ”¶ç¼©å·¦ä¾§
                i = m + 1;
            } else{                             // æ‰¾åˆ°äº†
                return m;
            }
        }
        return -1;
        // è¿”å›å°†ä¼šè¢«æŒ‰é¡ºåºæ’å…¥çš„ä½ç½®ã€‚
        //      return i;         ç›´æ¥å†™æ³•
        //      return -(i + 1);  javaåº•å±‚å†™æ³•: è®©ç»“æœåŒºåˆ†äºæ‰¾åˆ°çš„æƒ…å†µã€‚-2å°±æ˜¯æ’å…¥1çš„ä½ç½®ï¼Œ2å°±æ˜¯æ‰¾åˆ°äº†ä¸‹æ ‡2çš„ä½ç½®ã€‚
    }
}
```

æ’å…¥ä½ç½®ä¸º `i` å±äº [-1, n]

- **nums[i-1]è‚¯å®šæ¯”targetå°ï¼Œnums[i+1]è‚¯å®šæ¯”targetå¤§**ï¼šä¸ç„¶å°±ä¼šç§»åŠ¨

- **i = j + 1**ï¼šè¿™æ˜¯whileçš„é€€å‡ºæ¡ä»¶

### leftmost: æ‰¾åˆ°<=

å¦‚æœæ‰¾åˆ°äº†ï¼Œé‚£ä¹ˆleftmostæ˜¯æœ€å·¦çš„targetï¼Œrightmostæ˜¯æœ€å³çš„targetã€‚

å¦‚æœæ²¡æ‰¾åˆ°ï¼Œå°±ä¼šé€€åŒ–ä¸ºæ™®é€šçš„äºŒåˆ†â€”â€”nums[i-1]è‚¯å®šæ¯”targetå°ï¼Œnums[i+1]è‚¯å®šæ¯”targetå¤§

æ‰€ä»¥ï¼š

- leftmostï¼šæ‰¾åˆ°çš„æ˜¯ **>= `target` çš„æœ€å°ç´¢å¼•**
- rightmostï¼šæ‰¾åˆ°çš„æ˜¯ **<= `target` çš„æœ€å¤§ç´¢å¼•**

```java
public int leftmost(int[] nums, int target) {
    int i = 0, j = nums.length - 1;
    while (i <= j) {
        int m = i + j >>> 1;
        if (target <= nums[m]) {			// leftmost æŠŠç­‰äºæ”¾åœ¨å·¦è¾¹ï¼Œç»§ç»­æ”¶ç¼©å³ä¾§
            j = m - 1;
        } else if(nums[m] < target){
            i = m + 1;
        }
    }
    return i;
}

public int rightmost(int[] nums, int target) {
    int i = 0, j = nums.length - 1;
    while (i <= j) {
        int m = i + j >>> 1;
        if (target < nums[m]) {
            j = m - 1;
        } else if(nums[m] >= target){							// rightmost æŠŠç­‰äºæ”¾åœ¨å³è¾¹ï¼Œç»§ç»­æ”¶ç¼©å·¦ä¾§
            i = m + 1;
        }
    }
    return j;
}
```

### leftmost: ç²¾å‡†æ‰¾åˆ° -1

åŠ ä¸ªåˆ¤æ–­æ¡ä»¶ï¼š

- iæˆ–jæ˜¯å¦è¶Šç•Œ
- nums[i] æˆ– nums[j] æ˜¯å¦æ˜¯target

```java
public int leftmost(int[] nums, int target) {
    int i = 0, j = nums.length - 1;
    while (i <= j) {
        int m = i + j >>> 1;
        if (target <= nums[m]) {			// leftmost æŠŠç­‰äºæ”¾åœ¨å·¦è¾¹ï¼Œç»§ç»­æ”¶ç¼©å³ä¾§
            j = m - 1;
        } else {
            i = m + 1;
        }
    }
    if (i < 0 || i >= nums.length) {		// å› ä¸ºä¸‹é¢æ˜¯åˆ¤æ–­ nums[i]ï¼Œè¿™é‡Œæ ¡éªŒçš„éƒ½æ˜¯ i
        return -1;
    }   
    return nums[i] == target ? i : -1;
}

public int rightmost(int[] nums, int target) {
    int i = 0, j = nums.length - 1;
    while (i <= j) {
        int m = i + j >>> 1;
        if (target < nums[m]) {
            j = m - 1;
        } else {							// rightmost æŠŠç­‰äºæ”¾åœ¨å³è¾¹ï¼Œç»§ç»­æ”¶ç¼©å·¦ä¾§
            i = m + 1;
        }
    }
    if (j < 0 || j >= nums.length) {		// å› ä¸ºä¸‹é¢æ˜¯åˆ¤æ–­ nums[j]ï¼Œè¿™é‡Œæ ¡éªŒçš„éƒ½æ˜¯ j
        return -1;
    }
    return nums[j] == target ? j : -1;
}
```





> å››ç§äº’ç›¸è½¬åŒ–

`>= x`  æ˜¯ leftmost(x)ï¼Œ`<= x`  æ˜¯ rightmost(x)

leftmost(x) = rightmost(x-1) + 1 å³ `>= x â†â†’ (<= x-1) +1`

`> x` æ˜¯ `>= x+1`

`< x` æ˜¯ `<= x-1`

## leetcode

æœç´¢æ’å…¥ä½ç½®

[35. æœç´¢æ’å…¥ä½ç½®.md](..\..\é¢˜\leetcode\35. æœç´¢æ’å…¥ä½ç½®.md)ï¼šä¸å­˜åœ¨è¿”å› i

[34. åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®.md](..\..\é¢˜\leetcode\34. åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®.md)ï¼šleftmost rightmost -1ç‰ˆ

[278. ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬.md](..\..\é¢˜\leetcode\278. ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬.md)ï¼šleftmost å¿…å®šæ‰¾çš„åˆ°





ğŸš€ [162. å¯»æ‰¾å³°å€¼.md](..\..\é¢˜\leetcode\162. å¯»æ‰¾å³°å€¼.md)ï¼šå³°å€¼æ¨¡æ¿

 [852. å±±è„‰æ•°ç»„çš„å³°é¡¶ç´¢å¼•.md](..\..\é¢˜\leetcode\852. å±±è„‰æ•°ç»„çš„å³°é¡¶ç´¢å¼•.md) ï¼šç›´æ¥å¥—æ¨¡æ¿

 [1901. å¯»æ‰¾å³°å€¼ II.md](..\..\é¢˜\leetcode\1901. å¯»æ‰¾å³°å€¼ II.md)ï¼šäºŒç»´æ•°ç»„

 [2602. ä½¿æ•°ç»„å…ƒç´ å…¨éƒ¨ç›¸ç­‰çš„æœ€å°‘æ“ä½œæ¬¡æ•°.md](..\..\é¢˜\leetcode\2602. ä½¿æ•°ç»„å…ƒç´ å…¨éƒ¨ç›¸ç­‰çš„æœ€å°‘æ“ä½œæ¬¡æ•°.md) 
