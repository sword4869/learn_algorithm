[toc]



## é‡è¦

é¦–å…ˆï¼Œè¦æ±‚æ•°ç»„æœ‰åºã€‚

**target < nums[m] < target**ã€‚nums[m]åœ¨ä¸­é—´ï¼ˆå¯¹åº”mæ˜¯ä¸­é—´ç´¢å¼•ï¼‰

1. åŸºç¡€ç‰ˆå’Œæ”¹åŠ¨ç‰ˆï¼šåŒºåˆ«å°±æ˜¯**å·¦é—­å³é—­**ã€å·¦é—­å³å¼€ã€‚

     - i=0ï¼Œ**j = n -1** , j = n
     - **while(i<=j)**, while(i<j)
     - **j = m- 1**, j = m

2. åŸºç¡€ç‰ˆçš„å¤æ‚åº¦

    æ—¶é—´å¤æ‚åº¦
    * æœ€åæƒ…å†µ: **$O(\log n)$**
    * æœ€å¥½æƒ…å†µ: å¦‚æœå¾…æŸ¥æ‰¾å…ƒç´ æ°å¥½åœ¨æ•°ç»„ä¸­å¤®ï¼Œåªéœ€è¦å¾ªç¯ä¸€æ¬¡ $O(1)$
    
    ç©ºé—´å¤æ‚åº¦
    * éœ€è¦å¸¸æ•°ä¸ªæŒ‡é’ˆ $i,j,m$ , å› æ­¤é¢å¤–å ç”¨çš„ç©ºé—´æ˜¯ $O(1)$ 

3. leftmostå’Œrightmostçš„ç²¾å‡†æ‰¾åˆ° -1ï¼šæ‰¾ä¸åˆ°è¿”å›-1

    - leftmost: æ‰¾åˆ°äº†å¾€å·¦ç§»ï¼Œ j = m - 1
    - rightmost: æ‰¾åˆ°äº†å¾€å³ç§»ï¼Œ i = m + 1
4. leftmostå’Œrightmostçš„æ‰¾åˆ°<=ï¼šæ‰¾ä¸åˆ°è¿”å›æ›¿èº«

    - leftmostï¼šå¤§äºç­‰äºçš„æœ€å·¦ `target <= a[m]`, i
    - rightmostï¼šå°äºç­‰äºçš„æœ€å³ `a[m] <= target`ï¼Œi-1

### åŸºç¡€ç‰ˆï¼šijéƒ½æŸ¥ 

å…ƒç´ åœ¨æœ€å·¦è¾¹ L æ¬¡ï¼Œ å…ƒç´ åœ¨æœ€å³è¾¹ 2L æ¬¡
```java
// 704. äºŒåˆ†æŸ¥æ‰¾
class Solution {
    public int search(int[] nums, int target) {
        int i = 0, j = nums.length - 1;
        while (i <= j) {                // [i,j] èŒƒå›´å†…æœ‰ä¸œè¥¿
            int m = (i + j) >>> 1;      /// (i+j)/2çš„å‘ä¸‹å–æ•´
            if (target < nums[m]) {             // ç›®æ ‡åœ¨å·¦è¾¹
                j = m - 1;
            } else if (nums[m] < target){       // ç›®æ ‡åœ¨å³è¾¹
                i = m + 1;
            } else{                             // æ‰¾åˆ°äº†
                return m;
            }
        }
        return -1;
        // è¿”å›å°†ä¼šè¢«æŒ‰é¡ºåºæ’å…¥çš„ä½ç½®ã€‚
        //      return i;         ç›´æ¥å†™æ³•
        //      return -(i + 1);  javaåº•å±‚å†™æ³•
    }
}
```

æ’å…¥ä½ç½®ä¸º `i`: äºŒåˆ†ç»“æŸæ—¶ä¸€å®šæœ‰ï¼Œi æŒ‡å‘é¦–ä¸ªå¤§äº `target` çš„å…ƒç´ ï¼Œj æŒ‡å‘é¦–ä¸ªå°äº `target` çš„å…ƒç´ ã€‚

### leftmost: ç²¾å‡†æ‰¾åˆ° -1

è¿”å›çš„æ˜¯æœ€å·¦ä¾§çš„é‡å¤å…ƒç´  / è¿”å›çš„æ˜¯æœ€å³ä¾§çš„é‡å¤å…ƒç´ ï¼Œ**æ²¡æ‰¾åˆ°åˆ™è¿”å›-1**.

leftmostï¼šæœ¬æ¥ä¸­é—´ç´¢å¼•må¤„æ‰¾åˆ°äº†ï¼Œä½†æ˜¯è¿˜å¾€å·¦æ‰¾ï¼ˆç§»åŠ¨jå‘å·¦ `j = m - 1`ï¼‰

```java
/**
 * <h3>äºŒåˆ†æŸ¥æ‰¾ Leftmost </h3>
 * @return <p>æ‰¾åˆ°åˆ™è¿”å›æœ€é å·¦ç´¢å¼•</p>
 * <p>æ‰¾ä¸åˆ°è¿”å› -1</p>
 */
public static int binarySearchLeftmost(int[] a, int target) {
    int i = 0, j = a.length - 1;
    int candidate = -1;
    while (i <= j) {
        int m = (i + j) >>> 1;
        if (target < a[m]) {
            j = m - 1;
        } else if (a[m] < target) {
            i = m + 1;
        } else {
            candidate = m; // è®°å½•å€™é€‰ä½ç½®
            j = m - 1;     // ç»§ç»­å‘å·¦
        }
    }
    return candidate;
}
```
```java
/**
 * <h3>äºŒåˆ†æŸ¥æ‰¾ Rightmost </h3>
 * @return <p>æ‰¾åˆ°åˆ™è¿”å›æœ€é å³ç´¢å¼•</p>
 * <p>æ‰¾ä¸åˆ°è¿”å› -1</p>
 */
public static int binarySearchRightmost(int[] a, int target) {
    int i = 0, j = a.length - 1;
    int candidate = -1;
    while (i <= j) {
        int m = (i + j) >>> 1;
        if (target < a[m]) {
            j = m - 1;
        } else if (a[m] < target) {
            i = m + 1;
        } else {
            candidate = m; // è®°å½•å€™é€‰ä½ç½®
            i = m + 1;	   // ç»§ç»­å‘å³
        }
    }
    return candidate;
}
```
### leftmost: æ‰¾åˆ°<=

å¦‚æœæ²¡æ‰¾åˆ°ï¼Œå¯ä»¥è¿”å›ä¸€ä¸ªæ¯” -1 æ›´æœ‰ç”¨çš„ç´¢å¼•ã€‚

å³ï¼šleftmost æ‰¾åˆ°å¤§äºç­‰äºç›®æ ‡ `>= x` çš„æœ€å·¦å…ƒç´ çš„ç´¢å¼•ï¼ˆä¸‹ç•Œï¼‰ï¼Œrightmost æ‰¾åˆ°å°äºç­‰äºç›®æ ‡  `<= x`  çš„æœ€å³å…ƒç´ çš„ç´¢å¼•ï¼ˆä¸Šç•Œï¼‰




æ³¨æ„è¿”å›å€¼è¶…å‡ºæ•°ç»„çš„æƒ…å†µï¼šleftmost`[0, n]`, rightmost`[-1, n-1]`
- å¦‚æœtargetå°äºæœ€å°çš„ï¼Œleftmost è¿”å› 0ï¼Œrightmostè¿”å› **-1**
- å¦‚æœtargetå¤§äºæœ€å¤§çš„ï¼Œleftmost è¿”å› **n**ï¼Œrightmostè¿”å› n-1
```java
public static int binarySearchLeftmostUseful(int[] a, int target) {
    int i = 0, j = a.length - 1;
    while (i <= j) {
        int m = (i + j) >>> 1;
        if (target <= a[m]) {		// leftmost æŠŠç­‰äºæ”¾åœ¨å·¦è¾¹
            j = m - 1;
        } else {
            i = m + 1;
        }
    }
    return i;   // return j + 1;
}
å¾ªç¯å®Œæˆåï¼Œi æŒ‡å‘æœ€å·¦è¾¹çš„ target ï¼Œj æŒ‡å‘é¦–ä¸ªå°äº target çš„å…ƒç´ ã€‚

public static int binarySearchRightmostUseful(int[] a, int target) {
    int i = 0, j = a.length - 1;
    while (i <= j) {
        int m = (i + j) >>> 1;
        if (target < a[m]) {
            j = m - 1;
        } else {				// rightmost æŠŠç­‰äºæ”¾åœ¨å³è¾¹
            i = m + 1;
        }
    }
    return j;	// return i - 1;
}
å¾ªç¯å®Œæˆåï¼Œi æŒ‡å‘é¦–ä¸ªå¤§äº target çš„å…ƒç´  ï¼Œj æŒ‡å‘æœ€å³è¾¹çš„ targetã€‚
```

leftmostç†è§£ï¼š

1. ç®€åŒ–ï¼šä¸ç”¨è®°å½•`candidate`ï¼Œåˆ™ç›´æ¥å»æ‰`candidate = m; // è®°å½•å€™é€‰ä½ç½®`è¿™ä¸€è¡Œã€‚ç­‰äºæ—¶ç»§ç»­å¾€å·¦ `j = m - 1;` å¯ä»¥åˆå¹¶åˆ°ä¸Šé¢çš„if-elseä¸­ã€‚
2. return è¿”å›çš„å«ä¹‰å˜åŒ–ï¼šleftmost æ‰¾åˆ°å¤§äºç­‰äºç›®æ ‡çš„æœ€å·¦å…ƒç´  `return i`

![alt text](https://cdn.jsdelivr.net/gh/sword4869/pic1@main/images/202410091359514.png)

> å››ç§äº’ç›¸è½¬åŒ–

`>= x`  æ˜¯ leftmost(x), ä¹Ÿæ˜¯ rightmost(x-1) + 1 å³ `(<= x-1) +1`

`> x` æ˜¯ `>= x+1`

`< x` æ˜¯ `(>=x) - 1`

`<= x`  æ˜¯ rightmost(x), ä¹Ÿæ˜¯ leftmost(x+1) - 1 å³ `(>= x+1) -1`

### continueå†™æ³•

```java
// 704. äºŒåˆ†æŸ¥æ‰¾
class Solution {
    public int search(int[] nums, int target) {
        int i = 0, j = nums.length - 1;
        while (i <= j) {                // [i,j] èŒƒå›´å†…æœ‰ä¸œè¥¿
            int m = (i + j) >>> 1;      /// (i+j)/2çš„å‘ä¸‹å–æ•´
            if (target < nums[m]) {             // ç›®æ ‡åœ¨å·¦è¾¹
                j = m - 1;
                continue;
            }
            if (nums[m] < target){       // ç›®æ ‡åœ¨å³è¾¹
                i = m + 1;
                continue;
            } 
            // æ‰¾åˆ°äº†
            return m;
        }
        return -1;
    }
}
```

é€‚åˆåˆ¤æ–­i j è¾¹ç•Œæ¡ä»¶çš„ï¼š

â€‹	 [162. å¯»æ‰¾å³°å€¼.md](..\é¢˜\leetcode\162. å¯»æ‰¾å³°å€¼.md) 

## æ—¶é—´å¤æ‚åº¦

äºŒå‰æœç´¢æ ‘çš„æŸ¥æ‰¾æ“ä½œä¸äºŒåˆ†æŸ¥æ‰¾ç®—æ³•çš„å·¥ä½œåŸç†ä¸€è‡´ï¼Œéƒ½æ˜¯æ¯è½®æ’é™¤ä¸€åŠæƒ…å†µã€‚å¾ªç¯æ¬¡æ•°æœ€å¤šä¸ºäºŒå‰æ ‘çš„é«˜åº¦ï¼Œå½“äºŒå‰æ ‘å¹³è¡¡æ—¶ï¼Œä½¿ç”¨ ğ‘‚(logâ¡ğ‘›) æ—¶é—´



12ä¸ªå…ƒç´ çš„æ’åºæ•°ç»„è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œæ¯ä¸ªå…ƒç´ è¢«æŸ¥æ‰¾çš„æ¦‚ç‡æ˜¯ç›¸ç­‰çš„ï¼Œåˆ™å¹³å‡æ¯”è¾ƒæ¬¡æ•°æ˜¯ï¼Ÿ37/12

â€‹	$æŸ¥æ‰¾æ¬¡æ•°/å…ƒç´ ä¸ªæ•°=1*1+2*2+3*4+4*5$ã€‚ç”»ä¸€ä¸ªäºŒå‰æ ‘ï¼Œç¬¬iå±‚å°±è¦æ¯”è¾ƒici

## leetcode

æœç´¢æ’å…¥ä½ç½®

â€‹	 [35. æœç´¢æ’å…¥ä½ç½®.md](..\é¢˜\leetcode\35. æœç´¢æ’å…¥ä½ç½®.md) 

leftmost rightmost: ç²¾å‡†æ‰¾åˆ° -1ç‰ˆ

â€‹	 [34. åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®.md](..\é¢˜\leetcode\34. åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®.md) 

leftmost i rightmost j ç‰ˆ

â€‹	 [278. ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬.md](..\é¢˜\leetcode\278. ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬.md) 

â€‹	 [34. åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®.md](..\é¢˜\leetcode\34. åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®.md) 

å˜ç§

â€‹	[35. æœç´¢æ’å…¥ä½ç½®.md](..\é¢˜\leetcode\35. æœç´¢æ’å…¥ä½ç½®.md)  

â€‹	[278. ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬.md](..\é¢˜\leetcode\278. ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬.md)  

å˜ç§ä¹‹å±€éƒ¨æœ€å¤§å€¼ç³»åˆ—ï¼š

â€‹	 [852. å±±è„‰æ•°ç»„çš„å³°é¡¶ç´¢å¼•.md](..\..\é¢˜\leetcode\852. å±±è„‰æ•°ç»„çš„å³°é¡¶ç´¢å¼•.md) 

â€‹	 [162. å¯»æ‰¾å³°å€¼.md](..\..\é¢˜\leetcode\162. å¯»æ‰¾å³°å€¼.md) 

â€‹	 [1901. å¯»æ‰¾å³°å€¼ II.md](..\é¢˜\leetcode\1901. å¯»æ‰¾å³°å€¼ II.md) 

 [2602. ä½¿æ•°ç»„å…ƒç´ å…¨éƒ¨ç›¸ç­‰çš„æœ€å°‘æ“ä½œæ¬¡æ•°.md](..\..\é¢˜\leetcode\2602. ä½¿æ•°ç»„å…ƒç´ å…¨éƒ¨ç›¸ç­‰çš„æœ€å°‘æ“ä½œæ¬¡æ•°.md) 
